@import forms.LoginForm
@(form: Form[LoginForm])(implicit messagesApi: MessagesApi)

@inError(field: String) = @{
    !form.error(field).isEmpty
}

@filled(field: String) = @{
    !form("login").value.isEmpty
}

@decorateWithError(field: String) = @{
    if(inError(field)) {
        "form-control-danger"
    }
}

@decorateWithSuccess(field: String) = @{
    if(!inError(field)) {
        "form-control-success"
    }
}

@decorate(field: String) = @{
    if(inError(field)) {
        "form-control-danger"
    } else {
        "form-control-success"
    }
}

@main("Login") {


    @utils.centerContent(6, 3) {
        <div class="row">
            <div class="col-md-8 offset-md-2">

                <form action="@routes.AuthenticationController.loginPost()" method="POST">
                    <div class="form-group @if(!form.error("login").isEmpty) {
                        has-danger
                    } else { has-success}">
                        <label class="form-control-label" for="login">@messagesApi.apply("form.login")</label>
                        <input type="text" name="login" class="form-control @decorate("login")" id="login" placeholder="@messagesApi.apply("form.login.placeholder")"
                            @if(form.error("login").isEmpty && !form("login").value.isEmpty) {
                                value="@form("login").value.get" }>
                        @if(!form.error("login").isEmpty) {
                            <small class="text-muted">
                            @form.error("login").get.message
                            </small>
                        }
                    </div>
                    <div class="form-group@if(!form.error("pwd").isEmpty) {
                        has-danger
                    }">
                        <label class="form-control-label" for="pwd">@messagesApi.apply("form.password")</label>
                        <input type="text" name="pwd" class="form-control" id="pwd" placeholder="">
                        @if(!form.error("pwd").isEmpty) {
                            <small class="text-muted">
                            @form.error("pwd").get.message
                            </small>
                        }
                    </div>
                    <button type="submit" class="btn btn-primary">Valider</button>
                </form>
                @if(!form.error("loginForm").isEmpty) {
                    <p class="alert-danger">@form.error("loginForm").get.message</p>
                }

            </div>
        </div>
    }

}